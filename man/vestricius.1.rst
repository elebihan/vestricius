==========
vestricius
==========

----------------------
Inspect crash archives
----------------------

:Author: Eric Le Bihan <eric.le.bihan.dev@free.fr>
:Copyright: 2015 Eric Le Bihan
:Manual section: 1

SYNOPSIS
========

vestricius [OPTIONS] <command> [<argument>, ...]

vestricius add <plugin> <preset>

vestricius list <plugins|presets>

vestricius edit <preset>

vestricius inspect <filename>

vestricius peek

vestricius reveal

vestricius watch

Titus Vestricius Spurinna is an Haruspex, a priest who practiced divination by
looking at the entrails of animals. He is famous for having warned Julius Caesar
of his impending death.

`vestricius(1)` is a command line tool which allows the user to inspect a crash
archive generated by a program or an embedded device. A crash archive can be a
simple core dump file, or a tarball containing a core dump and log files. Once
the inspection is finished, a report in the YAML format is printed on standard
output.

To handle a crash archive, `vestricius(1)` relies on plugins and presets.
A plugin provides functions to handle the crash archive, whereas a preset is a
set of parameters to configure a plugin.

A default set of plugins is provided, but custom ones can be added. Use the
*--plugins-path* option to provide the path to the additional plugins. The
default plugins available are:

- simple-core: print the backtrace from a simple (gzipped) core dump file.
- wrapped-core: print the backtrace from a core dump file wrapped in a (gzipped)
  tarball.

See `vestricius-tutorial(7)` for a detailed guide to using Vestricius.


OPTIONS
=======

-v, --version                    display program version and exit
-D, --debug                      show debug messages
-P PATH, --plugins-path=PATH     set plugins search path

COMMANDS
========

The following commands are available:

list [OPTIONS] <plugins|presets>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

List the available plugins or presets.

add [OPTIONS] <plugin> <preset>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Create a new preset for an existing plugin.

The default text editor set by the user via the *$EDITOR* environment variable
will be summoned to edit the preset file.

edit [OPTIONS] <preset>
~~~~~~~~~~~~~~~~~~~~~~~

Edit an existing preset.

inspect [OPTIONS] <filename>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Inspect a crash archive.

By default, the result of the inspection will be formatted in YAMl and printed
to standard output. Use the *--output* option to write the report to a file.
Example::

  $ vestricius inspect --preset foo --output /path/to/report.yml

Available options:

-p PRESET, --preset=PRESET    name of the preset to use
-o FILE, --output=FILE        set output filename

peek [OPTIONS]
~~~~~~~~~~~~~~

Show information about the latest crash archive.

To look for a specific kind of crash archive, use the *--pattern* option to set
a regular expression which the filename of the archive should match.

Available options:

-p PRESET, --preset=PRESET    name of the preset to use
-P EXPR, --pattern=EXPR       pattern of crash archive name

reveal [OPTIONS]
~~~~~~~~~~~~~~~~

Fetch and inspect the latest crash archive.

Available options:

-p PRESET, --preset=PRESET    name of the preset to use
-o FILE, --output=FILE        set output filename
-P EXPR, --pattern=EXPR       pattern of crash archive name

watch [OPTIONS]
~~~~~~~~~~~~~~~

Watch the crash archive repository for new files.

By default, `vestricius(1)` will watch indefinitely for a new archive. To limit
the duration of the observation, use the *--duration* command line option to set
the desired number of seconds of the operation.

When a new crash archive is found, its filename and timestamp will be printed on
standard output. It is also possible to execute a custom command, using the
*--notification* option. The filename and timestamp can be passed to the custom
command via the *@FILENAME@* and *@TIMESTAMP@* arguments. Example::

  $ vestricius watch --notification='quuxify @FILENAME@ foo @TIMESTAMP@'

Available options:

-p PRESET, --preset=PRESET    name of the preset to use
-C CMD, --notification=CMD    command to perform to notify user
-P EXPR, --pattern=EXPR       pattern of crash archive name
-T N, --duration=N            duration of observation

ENVIRONMENT VARIABLES
=====================

Setting the following environment variables may alter the behavior of
`vestricius(1)`:

- VESTRICIUS_SHOW_STACK_TRACES: if set, show Python stack trace on error.
- VESTRICIUS_KEEP_GUNZIPPED: if set, do not remove gunzipped files.
- VESTRICIUS_KEEP_TMPDIR: if set, do not remove temporary directories.
- VESTRICIUS_KEEP_DOWNLOADED: if set, do not remove downloaded files.

SEE ALSO
========

- vestricius.conf(5)
- vestricius-tutorial(7)
